{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h1>Gráfico en Tiempo Real</h1>
  <!-- Botón para volver atrás -->
  <button type="button" class="btn btn-secondary mb-3" onclick="window.history.back();">
    <i class="fas fa-arrow-left"></i> Volver Atrás
  </button>
  <div class="card">
    <div class="card-body text-center">
      <!-- Se muestra el gráfico en la página -->
      <img src="{{ url_for('grafico.plot_png') }}" id="grafico-static" alt="Gráfico en Tiempo Real" class="img-fluid">
    </div>
  </div>
</div>

<script>
  // Actualiza la imagen cada 30 segundos para refrescar el gráfico
  setInterval(function(){
    var img = document.getElementById('grafico-static');
    // Añadimos un parámetro de tiempo para evitar el caché del navegador
    img.src = "{{ url_for('grafico.plot_png') }}?t=" + new Date().getTime();
  }, 5000);
</script>
{% endblock %}